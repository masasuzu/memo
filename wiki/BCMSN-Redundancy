{{toc}}

! 冗長化

!! ルータ冗長化プロトコル
||! プロトコル名        ||! HSRP ||! VRRP ||! GLBP ||
||! 仕様                || Cisco独自 || 標準 || Cisco独自 ||
||! ルータのロール      || アクティブルータ、スタンバイルータ || マスタールータ、バックアップルータ || AVG 、AVF ||
||! ロードバランシング  || 複数のグループを使用 || 複数のグループを使用 || 1つのグループ内で可能 ||
||! ロードバランシング時のクライアントのゲートウェイ || 異なる仮想IPアドレスを設定 || 異なる仮想IPアドレスを設定 || 同じ仮想IPアドレスを設定可能 ||
||! インターフェースのトラッキング || 可能 || 基本的には不可 || 可能 ||
||! preemptのデフォルト || 無効 || 有効 || 無効 ||
||! 仮想ルータのIPアドレス || 空きIPアドレス || 空きIPアドレスまたは実IPアドレス || 空きIPアドレス ||

!! HSRP
* デフォルトのプライオリティは100
* トラッキングしているIFがダウンした場合、デフォルトでプライオリティが10低下

!!! HSRPの設定


!!! HSRPの状態
: Init:
:: 初期状態
:: 設定が変更された場合、またはインタフェイスが最初に起動した時の状態

: Learn:
:: まだ仮想IPアドレスが判別されておらず、アクティブルータからHelloパケットを受信していない状態
:: アクティブルータからパケットが到着するのを待っている状態

: Listen:
:: ルータでは仮想IPアドレスが認識されているが、アクティブルータでもスタンバイルータでもない状態
:: アクティブルータおよびスタンバイルータからのHelloパケットを受信し続ける
:: HoldTimeがタイムアウト市内限り、アクティブルータおよびスタンバイルータ以外はこの状態のまま

: Speak:
:: ルータは定期的にHelloパケットを送信し、アクティブルータまたはスタンバイルータの選出に参加する
:: 自分がアクティブルータかスタンバイルータに選出されるまでルータはこの状態のまま

: Stanby:
:: 次にアクティブルータになる候補で定期的にHelloパケットを送信する
:: 移行状態を除きグループ内でStanby状態になるルータは一台のみ

: Active:
:: 端末から仮想IPアドレスに送信されたパケットを転送する
:: ルータは定期的にHelloパケットを送信
:: 移行状態を除きグループ内でActive状態のルータは最大一台

!! VRRP
* マスタールータ、バックアップルータで構成
* 標準冗長化プロトコル
* ロードバランシングを行う為には、クライアントに異なるゲートウェイの設定が必要
* 実IPアドレスの使用が可能
* Preemptがデフォルトで有効


!! GLBP
* デフォルトプライオリティは100
* 単一グループによるゲートウェイの自動選択と同時使用が可能

: AVG:
:: 仮想ルータに対するARP要求に応答する
: AVF:
:: 

!!! GLBPの負荷分散方式
:ラウンドロビン:
:: 仮想ルータに対するARP要求ごとに、順番に次のAVFの仮想MACアドレスが返される方式（デフォルト）。
: ウェイテッド:
:: インターフェースの重み付けによって、重みの大きいインターフェースの仮想MACアドレスほど、頻繁にARP応答が返される方式
:ホスト依存:
::　仮想ルータに対するARP要求を出す個々のクライアントに対して、同じクライアントには常に同じ仮想MACアドレスを返す方式

!! IRDP

* ICMP Router Discovery Protocol
* ICMP使用
* ダイナミックにデフォルトゲートウェイを検出
* RSC1256
* デフォルトゲートウェイおよびPCに設定
* ロードバランシングは不可
