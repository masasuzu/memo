! ヘッダ
: 日時:
:: 2009-07-09
: 場所:
:: 日経新聞社カンファレンスホール

{{toc_here}}

! mis-operation-ミスと向き合ってみる
: スピーカ:
:: 松崎吉信氏(株式会社インターネットイニシアティブ)

!! 実際に発生した事例

# 設定のコピペ
** IPアドレスもコピペ
# ルータの置き換え
** 旧ルータを稼働中に新ルータを接続
# 回線借用
** 逆側のリンク断
** Network分断
# バックボーンルータ再起動
** 迂回経路の設定を保存しないまま、再起動
*** ただし昔の話
# ケーブル抜き変え
** LEDの1がポートとずれている
# ケーブル撤去
** マルチファイバをGbEに転用していた
*** MIC
# Ciscoで新BGP Peer設定
** Ciscoはコマンドを逐次解釈
** フィルタを設定する前にPeerがUP
# 新規Peer用のIF設定
** OSPFの経路を広報する前に設定
*** IGPで到達できない
*** next hopの設定をするべき
# 新規ルータでeBGP Peer
** next-hop-self忘れた…
** 思わぬ経路に…
# BGP経路削減
## フィルタを設定
## 代替経路の設定忘れ
## defaultに流れる
# BGP soft reconfiguration
** 設定変更の差異に自動的には経路を再評価しない
** softキーワードを入れ忘れ大変なことに…
# 経路の終端
** 設計ミス
*** ループ
** 向けられた経路はNULL0を設定すべき
# redistribute
** ホントはやっちゃいけない設定
** 設定変更時にフィルタが外れた…
# パケットフィルタ
** マネジメントのルールを入れ忘れた…
*** リモートから操作不可に
# コンソーロギング
** シリアルコンソールは低速
*** バッファにたまる
*** CPU使用率が大変なことに
# ルータへのリモートログイン
** 似たようなルータ名
** 別のホストへログイン
*** そのまま設定変更…
# シリアル経由でログイン
** リモート接続のセッションが残っていた
*** そのまま設定変更…
# 設定削除
** no router ofpf ***
*** …
# バグ踏み
# 過程からの作業

!! ミスに向き合う
* ミスよりもその影響を減らす
* ミス自体を減らす
** 注意すればいい
** でも注意力の限界が
* 注意力に応じた運用を考える必要がある

!! 現状
* ミスが多い
** 支援作業環境が必要
*** 最小限の作業
*** 作業の範囲の明確化


* MKI 中西氏
** 手順を無視したため、オペレーションミス

* Cisco 土屋氏
** 設定が全て終了するまではBGP Peerをshutdown
** Startup configに前の設定は残っている
** 新しいIOSならコンフィグのロールバック機能がある


* 情報共有されていない
** wikiを使っているがなかなか見てくれない


* 三本柱
** ドキュメント
** 教育
** ツール
